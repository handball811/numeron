# ヌメロン仕様確認

## 実現したい機能
- ヌメロンのCPU対戦機能
- ヌメロンの対戦履歴管理機能

## ヌメロン対戦フロー
- 対戦スタート宣言
- 途中のがある場合
	- 途中から再開するかを確認
		- 実際に途中から再開する場合は前回の記録を一覧できるようにする
- 最初からの場合
	- 難易度設定（バーション決定）
	- 対戦時の桁数設定(3 ~ 5とか)
	- 先行、後攻の決定
- CPUが手番の時
	- 考えてるっぽい雰囲気出すために、コメント送ってもいいかも...?
	- CPUから質問が来る。
		- それに対して、人が答える（スタンプで回答）
			- 確認を行う。(スタンプで回答)
- 人が手番の時
	- CPUに対して、質問を送る
		- CPUから情報が帰って来る
	- この段階でなら、前のCPUへの回答を変更できるようにする。
	- これまでの回答履歴を表示できる。(ただし、表示した回数は集計されるようにする。)
- 勝敗が決した時
	- 今回の商社の表示
	- バージョンごと、総合での勝敗数の表示
	- 全体での、勝敗数の表示
	- (勝率ランキング)
	- 人が勝利した場合
		- 褒め称える。
	- CPUが勝利した場合
		- 検証作業を行うかを質問する
			- 一応続けて、どの段階でわかるか検証もOK
	- 前回のアクセスから、30分以上経ってたら、質問から入る。
		- 検証作業はできなくなっていて大丈夫

## イベントの定義
### label
- null
- init:wait  :入力を待っている状態
- init:start :対戦を開始する, 設定するかランダムにするかを聞く
- init:diff  :難易度の設定, 数字もしくはランダム
- init:digit :桁数の指定
- init:lead  :先行後攻の決定
- play:cpu   :cpuの手番、番号を発言し、レスポンスをまつ
- play:wait  :人の入力を待つ
- play:man   :manの手番、
- play:info  :対戦情報を取得したい時にうつ。
	
## 構成の検討
### データベース
- Serviceデータ（アクセス元のサービス）
	- uuid :str
	- name :str
- Userデータ(Serviceモデル, Service内IDが共通の場合は、登録不可)
	- uuid :str
	- name :str
	- service(foreign key) :Serviceデータとの結びつけ
	- service_user_id :str
	- create_at :Unixtime
- Eventデータ
	- uuid :str
	- user :foreign key
	- label :str
	- status :str
	- create_at :UnixTime

